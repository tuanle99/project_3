(this.webpackJsonpgardenista=this.webpackJsonpgardenista||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/gardenista-3.54f29a33.png"},35:function(e,t,a){e.exports=a(71)},40:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),c=a.n(l),o=a(15),s=a(2),i=(a(40),function(){return r.a.createElement("footer",{className:"footer mt-auto py-3"},r.a.createElement("div",{className:"container"},r.a.createElement("span",null,"Proudly Made with React | 2021")))}),u=a(1),m=a(32),d=Object(n.createContext)({userId:"",username:""}),g=d.Provider;function p(e,t){switch(t.type){case"loggin":return{userId:t.userId,username:t.username};default:return e}}function f(e){e.value;var t=Object(m.a)(e,["value"]),a=Object(n.useReducer)(p,{}),l=Object(u.a)(a,2),c=l[0],o=l[1];return r.a.createElement(g,Object.assign({value:[c,o]},t))}function h(){return Object(n.useContext)(d)}var v=a(19),E=a.n(v),b=a(5),y=a.n(b),w={getPlants:function(){return y.a.get("/api/plants")},getPlant:function(e){return y.a.get("/api/plants/"+e)},deletePlant:function(e){return y.a.delete("/api/plants/"+e)},savePlant:function(e){return y.a.post("/api/plants",e)},updateUserPlant:function(e,t){return y.a.put("/api/user/"+e,t)},getWeather:function(e,t){return y.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=current,minutely,hourly,alerts&units=imperial&appid=c1ba9a1d8d332b1ef324e57e7f47dbdf"))},getUsers:function(){return y.a.get("/api/user/")},getUser:function(e){return y.a.get("/api/user/"+e)},createUser:function(e){return y.a.post("/api/user/",e)},login:function(e){return y.a.post("/api/user/login",e)},auth:function(){return y.a.get("/api/user/auth")},logout:function(){return y.a.post("/api/user/logout")}},N=function(){var e=!0;Object(s.f)();function t(){localStorage.setItem("isLoggin",!1),localStorage.setItem("user",""),w.logout().then((function(t){e=t.data.logged_in,localStorage.setItem("isLoggin",!1),localStorage.setItem("user",null),window.location.pathname="/"})).catch((function(e){console.log(e.response)}))}return Object(n.useEffect)((function(){w.auth().then((function(e){return console.log(e),e.data.logged_in})).catch((function(e){console.log(e.response)}))}),[]),e?r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#5b7444"}},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("a",{className:"navbar-brand",href:"/home"},r.a.createElement("img",{src:E.a,alt:"",width:"75",height:"93.75"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",style:{color:"white"},href:"/cards"},"Your Plants")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",style:{color:"white"},href:"/plants"},"Add Plants")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",style:{color:"white"},href:"/journal"},"Journal"))),r.a.createElement("span",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",style:{color:"white"},onClick:t},"Log Out"))))):r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#5b7444"}},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("a",{className:"navbar-brand"},r.a.createElement("img",{src:E.a,alt:"",width:"75",height:"93.75"}))))},x=a(34),j=a(10),S=a.n(j),O=a(14);a(65);function k(e){var t=e.children;return r.a.createElement("div",{className:"weather-div",style:{width:"100%",height:"100%",marginTop:"90px"}},t)}function C(e){return e.data.length>0?r.a.createElement("div",{className:"row"},e.data.slice(0,5).map((function(e){return r.a.createElement("div",{className:"col-lg-4 col-md-12 col-sm-12"},r.a.createElement("div",{key:e.dt,className:"card",style:{width:"90%",margin:"20px",backgroundColor:"#A3C586"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title",style:{fontSize:"10pt"}},new Date(1e3*e.dt).toLocaleDateString("en-US",{weekday:"long"})),r.a.createElement("p",{className:"card-text",style:{fontSize:"9pt"}},"Temperature: ",e.temp.day,"\xb0"),r.a.createElement("p",{className:"card-text",style:{fontSize:"9pt"}},"Humidity: ",e.humidity,"%"),r.a.createElement("p",{className:"card-text",style:{fontSize:"9pt"}},"Chance of rain: ",e.pop,"%"))))}))):r.a.createElement("h3",{style:{textAlign:"center",padding:"123px"}},"Loading weather...")}function I(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"container".concat(t?"-fluid":"")},a)}function _(e){var t=e.fluid,a=e.children;return r.a.createElement("div",{className:"row".concat(t?"-fluid":"")},a)}function P(e){var t=e.size,a=e.children;return r.a.createElement("div",{className:t.split(" ").map((function(e){return"col-"+e})).join(" ")},a)}a(66);function U(e){var t=e.children;return r.a.createElement("div",{style:{height:"70%"},className:"needs-water"},t)}function z(e){return r.a.createElement("div",null,e.data.map((function(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"90%",margin:"20px"},key:e.id,className:"card"},r.a.createElement("div",{className:"card-body plant-card"},r.a.createElement("img",{src:e.image,style:{maxWidth:"100px"}}),r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("h6",{class:"card-subtitle mb-2 text-muted"},e.botanical_name))))})))}var D=function(){var e,t=Object(n.useState)([]),a=Object(u.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)([]),s=Object(u.a)(o,2),i=s[0],m=s[1],d=h(),g=Object(u.a)(d,1)[0],p=localStorage.getItem("user"),f={};function v(){return E.apply(this,arguments)}function E(){return(E=Object(O.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("user")?"undefined"===localStorage.getItem("user")&&localStorage.setItem("user",g.userId):localStorage.setItem("user",g.userId),e.next=3,w.getUser(p).then((function(e){return f=e.data}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(O.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v();case 2:y(),f.plants.map((function(t){t.next_water&&t.next_water.substr(0,10)===e&&m((function(e){return[].concat(Object(x.a)(e),[t])}))}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){var t=new Date,a=""+(t.getMonth()+1),n=""+t.getDate(),r=t.getFullYear();a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),e=r+"-"+a+"-"+n}return Object(n.useEffect)((function(){localStorage.setItem("isLoggin",!0),!0!==("true"===localStorage.getItem("isLoggin"))&&(window.location.pathname="/"),function(){b.apply(this,arguments)}(),navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,a=e.coords.longitude;w.getWeather(t,a).then((function(e){c(e.data.daily)}))}))}),[g]),console.log(f),r.a.createElement(I,null,r.a.createElement("div",{className:"row mb-5"},r.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-4 "},r.a.createElement("p",{style:{textAlign:"center",marginTop:"23px"}},"Welcome, back!",r.a.createElement("br",null),"The plants that need watering today are:"),r.a.createElement(U,null,r.a.createElement(z,{data:i}))),r.a.createElement("div",{className:"col-sm-12 col-md-12 col-lg-8"},r.a.createElement(_,null,r.a.createElement(k,null,r.a.createElement(C,{data:l}))))))},L=a(11);var W=function(){var e=Object(s.f)(),t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useState)(""),c=Object(u.a)(l,2),o=c[0],i=c[1],m=h(),d=Object(u.a)(m,2),g=(d[0],d[1]);return Object(n.useEffect)((function(){localStorage.setItem("isLoggin",!1),localStorage.setItem("user",""),w.auth().then((function(t){t.data&&t.data.logged_in&&e.push("/home")})).catch((function(e){return console.log(e.response)}))}),[]),r.a.createElement("div",{className:"container mt-5 mb-5"},r.a.createElement("h1",{className:"mt-2"},"Welcome!"),r.a.createElement("div",{style:{height:1,width:"100%",borderTop:"1px solid gray"},className:"mt-4"}," "),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-lg-8 col-md-8 col-sm-12 mt-5",style:{display:"block",textAlign:"center"}},r.a.createElement("h2",{className:"mt-4"},"Plant Tracking"),r.a.createElement("p",{className:"mt-4"},"Create individual plant cards to track each plant in your garden. We provide templates to get started on most common plants, or you can add your own!"),r.a.createElement("h2",{className:"mt-5"},"Garden Journal"),r.a.createElement("p",{className:"mt-4"},"Our bread-and-butter - the garden journal allows you to free-write about your garden - things you\u2019ve planted, watched grow, the progress any plants have made, to-buy lists, garden plans, and whatever else you want!"),r.a.createElement("h2",{className:"mt-5"},"Calendar"),r.a.createElement("p",{className:"mt-4"},"The calendar feature can help you track watering days or other significant activities for your garden.")),r.a.createElement("div",{className:"col-lg-4 col-md-4 col-sm-12"},r.a.createElement("div",{className:"input-group input-group-sm mt-lg-5 "},r.a.createElement("input",{type:"text",className:"form-control mt-lg-5 mt-md-5","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",placeholder:"Username",ref:t})),r.a.createElement("div",{class:"input-group input-group-sm"},r.a.createElement("input",{type:"text",className:"form-control mt-3 ","aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",placeholder:"Password",ref:a})),r.a.createElement("div",null,o),r.a.createElement("div",{className:"text-right mt-3 mb-5"},r.a.createElement(L.a,{variant:"mr-2",onClick:function(e){e.preventDefault();var n={username:t.current.value,password:a.current.value,plants:[]};w.createUser(n).catch((function(e){return console.log(e)}))}},r.a.createElement("u",null,"Sign Up")),r.a.createElement(L.a,{variant:"primary",style:{backgroundColor:"#5B7444",border:"none",borderRadius:0},onClick:function(n){n.preventDefault(),w.login({username:t.current.value,password:a.current.value}).then((function(t){console.log(t),i(""),function(t){g({type:"loggin",userId:t.userId,username:t.username}),e.push("/home")}({userId:t.data.user._id,username:t.data.user.username})})).catch((function(e){console.log(e.response),401===e.response.status&&i(e.response.data.message)}))}},"Log In")))))};a(67);var A=function(){var e=h(),t=Object(u.a)(e,1)[0],a="true"===localStorage.getItem("isLoggin"),l=localStorage.getItem("user"),c=Object(n.useState)([]),o=Object(u.a)(c,2),s=o[0],i=o[1],m=Object(n.useState)({title:"title",note:"note"}),d=Object(u.a)(m,2),g=d[0],p=d[1],f=Object(n.useRef)(),v=Object(n.useRef)();Object(n.useEffect)((function(){a||(window.location.pathname="/"),w.getUser(l).then((function(e){i(e.data.journals)})).catch((function(e){console.log(e.response)}))}),[t]);var E=function(e){e.preventDefault();var t=e.target.value;p(s.find((function(e){return e.title===t})))};return r.a.createElement(I,null,r.a.createElement("div",{className:"row mt-5"},r.a.createElement("div",{className:"col-lg-4",style:{backgroundColor:"orange"}},s.map((function(e){return r.a.createElement(L.a,{className:"mt-3 mb-3 d-flex",style:{width:"100%"},value:e.title,onClick:E},e.title)}))),r.a.createElement("div",{className:"col-lg-8"},r.a.createElement("h3",{className:"justify-content-center d-flex"},"Journal Entries"),r.a.createElement("div",{className:"list-container"},r.a.createElement("div",null,r.a.createElement("input",{className:"note-title",placeholder:g.title,maxLength:"28",type:"text",ref:f}),r.a.createElement("textarea",{className:"note-textarea",placeholder:g.note,ref:v}))),r.a.createElement(L.a,{className:"mr-4",onClick:function(){w.updateUserJournal(l,{title:f.current.value,note:v.current.value}).then((function(e){return console.log("Successful POST to DB!",e)})).catch((function(e){return console.log("this is the error",e.response)}))}},"Save"))))};a(68);var T=function(e){var t=e.name,a=e.botanical_name,l=e.height,c=e.usda_zones,o=e.image,s=e.description,i=e.number,u=localStorage.getItem("user"),m=Object(n.useRef)();function d(){return(d=Object(O.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,w.getUser(u).then((function(e){return t.push(e.data.plants)}));case 3:t[0][i].next_water=m.current.value,w.updateUserPlant(u,{plants:t[0]}).then((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("div",{className:"card border-warning"},r.a.createElement("div",{className:"card-body plant-card"},r.a.createElement("img",{src:o,style:{maxWidth:"100px"}}),r.a.createElement("h5",{className:"card-title"},t),r.a.createElement("h6",{class:"card-subtitle mb-2 text-muted"},a),r.a.createElement("p",{class:"card-text"},"Height: ",l),r.a.createElement("p",{class:"card-text"},"USDA Zones: ",c),r.a.createElement("p",{class:"card-text"},s),r.a.createElement("div",{className:"form-water row g-3"},r.a.createElement("input",{ref:m,type:"text",className:"col-auto form-control",id:"next-water",placeholder:"Next Water Date (mm/dd/yyyy)"}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),function(){d.apply(this,arguments)}()},type:"submit",class:"col-auto btn btn-primary mb-3 float-end"},"Save")))))};var R=function(e){return console.log("Props",e),e.plantState.map((function(e,t){return r.a.createElement(T,{key:e._id,number:t,id:e._id,name:e.name,botanical_name:e.botanical_name,height:e.height,usda_zones:e.usda_zones,image:e.image,description:e.description})}))};a(69);var B=function(){return r.a.createElement("div",null,r.a.createElement("div",{class:"list-group"},r.a.createElement("ul",{class:"list-group list-group-flush"},r.a.createElement("a",{href:"/plants",class:"list-group-item list-group-item-action flex-column align-items-start"},r.a.createElement("div",{class:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{class:"mb-1"},"Add Plant")),r.a.createElement("p",{class:"mb-1"},"Choose from a list of common garden plants to add to your personal collection here.")),r.a.createElement("a",{href:"#",class:"list-group-item list-group-item-action flex-column align-items-start disabled"},r.a.createElement("div",{class:"d-flex w-100 justify-content-between"},r.a.createElement("h5",{class:"mb-1"},"Add Custom Plant")),r.a.createElement("small",null,"Feature Coming Soon!"),r.a.createElement("p",{class:"mb-1"},"Don't see your plant in our list? Add a custom plant to your collection here.")))))};var J=function(){var e=h(),t=Object(u.a)(e,2),a=t[0],l=(t[1],Object(n.useState)([])),c=Object(u.a)(l,2),o=c[0],s=c[1],i=Object(n.useState)([]),m=Object(u.a)(i,2),d=m[0],g=m[1],p="true"===localStorage.getItem("isLoggin"),f=localStorage.getItem("user");return Object(n.useEffect)((function(){p||(window.location.pathname="/"),w.getUser(f).then((function(e){g(e.data),s(e.data.plants)}))}),[a]),console.log(d),r.a.createElement("div",null,r.a.createElement(I,null,r.a.createElement(_,null,r.a.createElement(P,{size:"md-3"},r.a.createElement("div",{className:"side-style"},r.a.createElement(B,null))),r.a.createElement(P,{size:"md-9"},o.length?r.a.createElement(R,{plantState:o}):r.a.createElement("h5",null,"No results to display")))))};var G=function(e){var t=e.image,a=e.name,l=e.botanical_name,c=e.height,o=e.usda_zones,s=e.description,i=Object(n.useState)({bgColor:"",color:"",text:"Save"}),m=Object(u.a)(i,2),d=m[0],g=m[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"card border-warning"},r.a.createElement("div",{className:"card-body plant-card"},r.a.createElement("img",{src:t,style:{maxWidth:"100px"}}),r.a.createElement("h5",{className:"card-title"},a),r.a.createElement("h6",{class:"card-subtitle mb-2 text-muted"},l),r.a.createElement("p",{class:"card-text"},"Height: ",c),r.a.createElement("p",{class:"card-text"},"USDA Zones: ",o),r.a.createElement("p",{class:"card-text"},s),r.a.createElement("button",{onClick:function(){e.savePlant(e),"Save"===d.text?g({bgColor:"#A3C586",color:"white",text:"Saved"}):g({bgColor:"#5B7444",color:"white",text:"Save"})},style:{backgroundColor:d.bgColor,color:d.color},className:"btn"},d.text))))};var H=function(e){return e.plantState.map((function(t){return r.a.createElement(G,{key:t._id,id:t._id,name:t.name,botanical_name:t.botanical_name,height:t.height,usda_zones:t.usda_zones,image:t.image,description:t.description,savePlant:e.savePlant})}))};var F=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],l=t[1],c=h(),o=Object(u.a)(c,2),s=o[0];o[1],Object(n.useEffect)((function(){w.getPlants().then((function(e){return l(e.data)})).catch((function(e){return console.log(e)}))}),[s]);var i=localStorage.getItem("user");return r.a.createElement("div",null,r.a.createElement(I,null,a.length?r.a.createElement(H,{plantState:a,savePlant:function(e){console.log("This is the current plant",e),w.updateUserPlant(i,{id:e.id,name:e.name,botanical_name:e.botanical_name,height:e.height,usda_zones:e.usda_zones,image:e.image,description:e.description,next_water:""}).then((function(e){return console.log("Successful POST to DB!",e)})).catch((function(e){return console.log("this is the error",e)}))}}):r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("p",{style:{fontStyle:"italic"}},"No results to display"))))};var M=function(){return r.a.createElement(f,null,r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(N,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/",component:W}),r.a.createElement(s.a,{exact:!0,path:"/home",component:D}),r.a.createElement(s.a,{exact:!0,path:"/journal",component:A}),r.a.createElement(s.a,{exact:!0,path:"/cards",component:J}),r.a.createElement(s.a,{exact:!0,path:"/plants",component:F})),r.a.createElement(i,null))))},Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(70);c.a.render(r.a.createElement(M,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");Y?function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e):Z(e)}))}}()}},[[35,1,2]]]);
//# sourceMappingURL=main.7448bb47.chunk.js.map